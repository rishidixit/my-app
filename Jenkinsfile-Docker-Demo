node {
    stage ('Git CheckOut') {
        git credentialsId: 'github', url: 'https://github.com/rishidixit/my-app'
        }
    stage('Maven Package') {
        def mnvHome = tool name: 'maven', type: 'maven'
        def mvnCMD = "${mnvHome}/bin/mvn"
        sh "${mvnCMD} clean package"

    }
    stage ('Build Docker Image') {
        sh 'docker build -t rishidixit/dockerjenkinsdemo:2.0.0 .'
    }
     stage ('Push Docker Image') {
         withCredentials([string(credentialsId: 'dockerhub', variable: 'GithubPwd')]) {
         sh "docker login -u rishidixit -p ${GithubPwd}"
        }
        
        sh 'docker push rishidixit/dockerjenkinsdemo:2.0.0 '
    }
}